<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calverse Health Assessment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
       
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            background-image: 
                radial-gradient(ellipse at top right, rgba(251, 191, 36, 0.1), transparent 60%),
                radial-gradient(ellipse at bottom left, rgba(251, 191, 36, 0.1), transparent 60%);
            color: #E5E7EB;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- Welcome Screen --- */
        #welcome-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000000; z-index: 100; display: flex;
            flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 1s ease-in-out, transform 1s ease-in-out;
        }
        #welcome-screen.hidden {
            opacity: 0; transform: scale(1.1); pointer-events: none;
        }
        .welcome-text {
            font-size: clamp(1.8rem, 5vw, 2.5rem); /* Responsive font size */
            font-weight: 700; color: #FBBF24; letter-spacing: 2px;
            text-align: center; padding: 0 1rem;
        }
        .welcome-text span {
            display: inline-block; opacity: 0; transform: translateY(20px);
            animation: letter-reveal 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }
        @keyframes letter-reveal { to { opacity: 1; transform: translateY(0); } }
        #start-arrow {
            margin-top: 4rem; width: 60px; height: 60px; border: 2px solid #FBBF24;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            cursor: pointer; opacity: 0; transform: scale(0.5);
            animation: arrow-appear 1s ease 2s forwards, pulse-glow 2s infinite 3s;
        }
        @keyframes arrow-appear { to { opacity: 1; transform: scale(1); } }

        /* --- Main App & Card Styles --- */
        #app-container { opacity: 0; transition: opacity 1s ease-in-out; }
        #app-container.visible { opacity: 1; }
        .card-stack-container { perspective: 1000px; position: relative; }
        .card {
            background: linear-gradient(145deg, #1F1F1F, #141414);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 15px 35px -10px rgba(0, 0, 0, 0.5); /* Optimized shadow */
            border-radius: 1.5rem; position: absolute; width: 100%; height: 100%;
            transform-origin: center;
            backface-visibility: hidden; 
            will-change: transform, opacity; /* Performance Boost */
            display: flex;
            flex-direction: column;
        }
        .card-content { 
            opacity: 0; 
            transform: translateY(10px); 
            animation: content-fade-in 0.5s ease 0.4s forwards; 
        }
        @keyframes content-fade-in { to { opacity: 1; transform: translateY(0); } }

        /* --- Custom UI Components --- */
        .gradient-btn-icon {
            background-image: linear-gradient(to right, #FBBF24, #F59E0B);
            transition: all 0.3s ease;
            position: relative; overflow: hidden;
            animation: pulse-glow 2.5s infinite ease-in-out;
            border-radius: 9999px;
        }
        .gradient-btn-icon:hover {
            box-shadow: 0 10px 25px rgba(251, 191, 36, 0.3);
            transform: scale(1.1);
        }
        .icon-btn {
            background-color: #374151;
            transition: all 0.3s ease;
            border-radius: 9999px;
        }
        .icon-btn:hover {
            background-color: #4B5563;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255,255,255,0.1);
        }
        .selectable-card-input:checked + .selectable-card-label {
            background-color: #2d2d2d;
            border-color: #FBBF24;
            transform: translateY(-4px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        .selectable-card-label { transition: all 0.3s ease; }
        .selectable-card-label:hover { transform: translateY(-4px); border-color: rgba(251, 191, 36, 0.5); }
        
        /* --- Style for selected icons --- */
        .selectable-icon { transition: color 0.3s ease; }
        .selectable-card-input:checked + .selectable-card-label .selectable-icon {
            color: #FBBF24; /* amber-400 */
        }

        /* --- OPTIMIZED Range Slider Styles --- */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #374151;
            border-radius: 5px;
            outline: none;
            margin: 20px 0;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #FBBF24;
            cursor: pointer;
            border-radius: 50%;
            border: 3px solid #121212;
            box-shadow: 0 0 5px rgba(251, 191, 36, 0.5);
        }
        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: #FBBF24;
            cursor: pointer;
            border-radius: 50%;
            border: 3px solid #121212;
            box-shadow: 0 0 5px rgba(251, 191, 36, 0.5);
        }

        /* --- Keyframe Animations --- */
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 8px rgba(251, 191, 36, 0.2); }
            50% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.4); }
        }
    </style>
</head>
<body>

    <div id="welcome-screen">
        <h1 class="welcome-text"></h1>
        <div id="start-arrow">
            <svg class="w-6 h-6 text-amber-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" /></svg>
        </div>
    </div>

    <!-- Responsive App Container -->
    <div id="app-container" class="flex items-center justify-center min-h-screen p-4 sm:p-6">
        <div class="w-full max-w-md mx-auto">
            <!-- Responsive Height for Card Stack -->
            <div class="card-stack-container" style="height: 600px;">
            
                <!-- Step 1: Name -->
                <div id="step-1" class="card p-6 sm:p-8">
                    <div class="card-content flex flex-col h-full">
                        <div class="text-center flex-grow flex flex-col justify-center">
                            <svg class="w-16 h-16 mx-auto text-amber-400 mb-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                            <h2 class="text-2xl sm:text-3xl font-bold text-white mb-2">First, what should we call you?</h2>
                            <p class="text-gray-400 mb-8">Let's get personal.</p>
                            <div class="relative">
                                <svg class="w-5 h-5 text-gray-500 absolute top-1/2 left-4 transform -translate-y-1/2 pointer-events-none" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                <input type="text" id="name" name="name" placeholder="Enter your first name" class="w-full bg-black/30 border-2 border-gray-700 focus:border-amber-400 rounded-xl py-3 pl-12 pr-4 text-white placeholder-gray-500 focus:outline-none transition-all">
                            </div>
                        </div>
                        <div class="mt-auto pt-8 flex justify-end">
                            <button data-action="next" class="gradient-btn-icon p-3 cursor-pointer">
                                <svg class="w-6 h-6 text-gray-900" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Gender -->
                <div id="step-2" class="card p-6 sm:p-8">
                    <div class="card-content flex flex-col h-full">
                        <div class="flex-grow">
                            <h2 class="text-2xl sm:text-3xl font-bold text-white mb-6">What's your gender?</h2>
                            <div class="space-y-4">
                                <input type="radio" name="gender" id="gender-male" value="Male" class="selectable-card-input hidden">
                                <label for="gender-male" class="selectable-card-label flex items-center p-4 bg-black/30 rounded-xl border-2 border-gray-700 cursor-pointer">
                                    <svg class="w-6 h-6 mr-4 text-gray-400 selectable-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 8V2"/><path d="m15 5-6 6"/></svg>
                                    <span class="font-bold text-lg text-white">Male</span>
                                </label>
                                <input type="radio" name="gender" id="gender-female" value="Female" class="selectable-card-input hidden">
                                <label for="gender-female" class="selectable-card-label flex items-center p-4 bg-black/30 rounded-xl border-2 border-gray-700 cursor-pointer">
                                    <svg class="w-6 h-6 mr-4 text-gray-400 selectable-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 17v-5"/><path d="M9 20h6"/></svg>
                                    <span class="font-bold text-lg text-white">Female</span>
                                </label>
                                <input type="radio" name="gender" id="gender-other" value="Other" class="selectable-card-input hidden">
                                <label for="gender-other" class="selectable-card-label flex items-center p-4 bg-black/30 rounded-xl border-2 border-gray-700 cursor-pointer">
                                    <svg class="w-6 h-6 mr-4 text-gray-400 selectable-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="m15 9 6-6"/><path d="M21 7v-4h-4"/><path d="m3 21 6-6"/><path d="M3 17v4h4"/><path d="m12 16-4 4"/><path d="m16 12-4-4"/></svg>
                                    <span class="font-bold text-lg text-white">Other</span>
                                </label>
                            </div>
                        </div>
                        <div class="mt-auto pt-8 flex items-center justify-between">
                            <button data-action="prev" class="icon-btn p-3 cursor-pointer"><svg class="w-6 h-6 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"/></svg></button>
                            <button data-action="next" class="gradient-btn-icon p-3 cursor-pointer"><svg class="w-6 h-6 text-gray-900" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z"/></svg></button>
                        </div>
                    </div>
                </div>
                
                <!-- Step 3: Age (Optimized with Range Slider) -->
                <div id="step-3" class="card p-6 sm:p-8">
                    <div class="card-content flex flex-col h-full">
                        <div class="flex-grow flex flex-col justify-center text-center">
                            <h2 class="text-2xl sm:text-3xl font-bold text-white mb-4">How young are you?</h2>
                            <span id="ageValue" class="text-5xl font-extrabold text-amber-400">25</span>
                            <input type="range" id="age" name="age" min="10" max="100" value="25" class="mt-8">
                        </div>
                        <div class="mt-auto pt-8 flex items-center justify-between">
                            <button data-action="prev" class="icon-btn p-3 cursor-pointer"><svg class="w-6 h-6 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"/></svg></button>
                            <button data-action="next" class="gradient-btn-icon p-3 cursor-pointer"><svg class="w-6 h-6 text-gray-900" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z"/></svg></button>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Height (Optimized with Range Slider) -->
                <div id="step-4" class="card p-6 sm:p-8">
                    <div class="card-content flex flex-col h-full">
                         <div class="flex-grow flex flex-col justify-center text-center">
                            <h2 class="text-2xl sm:text-3xl font-bold text-white mb-4">What's your height?</h2>
                            <div>
                                <span id="heightValue" class="text-5xl font-extrabold text-amber-400">170</span>
                                <span class="text-xl font-medium ml-1 text-gray-400">cm</span>
                            </div>
                            <input type="range" id="height" name="height" min="100" max="220" value="170" class="mt-8">
                        </div>
                        <div class="mt-auto pt-8 flex items-center justify-between">
                             <button data-action="prev" class="icon-btn p-3 cursor-pointer"><svg class="w-6 h-6 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"/></svg></button>
                            <button data-action="next" class="gradient-btn-icon p-3 cursor-pointer"><svg class="w-6 h-6 text-gray-900" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z"/></svg></button>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Weight (Optimized with Range Slider) -->
                <div id="step-5" class="card p-6 sm:p-8">
                    <div class="card-content flex flex-col h-full">
                         <div class="flex-grow flex flex-col justify-center text-center">
                            <h2 class="text-2xl sm:text-3xl font-bold text-white mb-4">And your current weight?</h2>
                            <div>
                                <span id="weightValue" class="text-5xl font-extrabold text-amber-400">65</span>
                                <span class="text-xl font-medium ml-1 text-gray-400">kg</span>
                            </div>
                            <input type="range" id="weight" name="weight" min="30" max="150" value="65" class="mt-8">
                        </div>
                        <div class="mt-auto pt-8 flex items-center justify-between">
                            <button data-action="prev" class="icon-btn p-3 cursor-pointer"><svg class="w-6 h-6 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"/></svg></button>
                            <button data-action="next" class="gradient-btn-icon p-3 cursor-pointer"><svg class="w-6 h-6 text-gray-900" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z"/></svg></button>
                        </div>
                    </div>
                </div>

                <!-- Step 6: Activity Level -->
                <div id="step-6" class="card p-6 sm:p-8">
                     <div class="card-content flex flex-col h-full justify-between">
                        <div class="flex-grow">
                            <h2 class="text-2xl sm:text-3xl font-bold text-white mb-6">How active are you?</h2>
                            <div class="space-y-3">
                                <input type="radio" name="activity" id="activity-1" value="Sedentary" class="selectable-card-input hidden">
                                <label for="activity-1" class="selectable-card-label flex items-center p-3 rounded-xl cursor-pointer bg-black/30 border-2 border-gray-700 text-white">
                                    <div class="p-2 bg-gray-900/50 rounded-lg mr-4"><svg class="w-7 h-7 text-gray-300 selectable-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 9V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v2"/><path d="M3 11v5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z"/><path d="M5 18v2"/><path d="M19 18v2"/></svg></div>
                                    <div><span class="font-bold text-lg">Sedentary</span><p class="text-sm text-gray-400">Little to no exercise</p></div>
                                </label>
                                <input type="radio" name="activity" id="activity-2" value="Light" class="selectable-card-input hidden">
                                <label for="activity-2" class="selectable-card-label flex items-center p-3 rounded-xl cursor-pointer bg-black/30 border-2 border-gray-700 text-white">
                                    <div class="p-2 bg-gray-900/50 rounded-lg mr-4"><svg class="w-7 h-7 text-gray-300 selectable-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c-3.3 0-6-2.7-6-6 0-1.4.5-2.8 1.4-3.8A5.4 5.4 0 0 1 12 8c1.8 0 3.4.9 4.6 2.2.9 1 1.4 2.4 1.4 3.8 0 3.3-2.7 6-6 6Z"/><path d="M12 8V2"/><path d="M12 2h.01"/></svg></div>
                                    <div><span class="font-bold text-lg">Lightly Active</span><p class="text-sm text-gray-400">Exercise 1-3 days/week</p></div>
                                </label>
                                <input type="radio" name="activity" id="activity-3" value="Moderate" class="selectable-card-input hidden">
                                <label for="activity-3" class="selectable-card-label flex items-center p-3 rounded-xl cursor-pointer bg-black/30 border-2 border-gray-700 text-white">
                                    <div class="p-2 bg-gray-900/50 rounded-lg mr-4"><svg class="w-7 h-7 text-gray-300 selectable-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 5.88a2 2 0 0 0-2.44 0L7.34 8.3a2 2 0 0 0 0 2.82l2.44 2.44a2 2 0 0 0 2.82 0l2.44-2.44a2 2 0 0 0 0-2.82z"/><path d="m14.24 14.24 5.66 5.66"/><path d="m4.1 4.1 5.66 5.66"/><path d="M18.36 5.64 16.95 7.05"/><path d="M12.73 11.27 11.31 9.85"/><path d="m7.05 16.95-1.41 1.41"/><path d="M9.85 11.31 8.44 12.73"/></svg></div>
                                    <div><span class="font-bold text-lg">Moderately Active</span><p class="text-sm text-gray-400">Exercise 3-5 days/week</p></div>
                                </label>
                                <input type="radio" name="activity" id="activity-4" value="Very" class="selectable-card-input hidden">
                                <label for="activity-4" class="selectable-card-label flex items-center p-3 rounded-xl cursor-pointer bg-black/30 border-2 border-gray-700 text-white">
                                    <div class="p-2 bg-gray-900/50 rounded-lg mr-4"><svg class="w-7 h-7 text-gray-300 selectable-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9a2 2 0 0 1-2-2V3a2 2 0 0 1 4 0v4a2 2 0 0 1-2 2Z"/><path d="M12 11a6 6 0 0 0-6 6v3h12v-3a6 6 0 0 0-6-6Z"/></svg></div>
                                    <div><span class="font-bold text-lg">Very Active</span><p class="text-sm text-gray-400">Exercise 6-7 days/week</p></div>
                                </label>
                            </div>
                        </div>
                        <div class="mt-auto pt-8 flex items-center justify-between">
                            <button data-action="prev" class="icon-btn p-3 cursor-pointer"><svg class="w-6 h-6 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"/></svg></button>
                            <button data-action="next" class="gradient-btn-icon p-3 cursor-pointer"><svg class="w-6 h-6 text-gray-900" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z"/></svg></button>
                        </div>
                    </div>
                </div>
            
                <!-- Step 7: Summary -->
                <div id="step-7" class="card p-8">
                    <div class="card-content flex flex-col h-full justify-center text-center">
                         <div class="mb-8">
                            <svg class="w-16 h-16 mx-auto text-amber-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        </div>
                        <h2 class="text-3xl font-extrabold text-white mb-4">All Set!</h2>
                        <p id="redirect-message" class="text-gray-400 mb-6">Saving your profile...</p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Load config first, then the page-specific script -->
    <script type="module" src="scripts/firebase-init.js"></script>
    <script type="module" src="scripts/welcome.js"></script>
</body>
</html>
